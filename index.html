<!DOCTYPE html>
<html>
    <head>
        <script>
            var initialised=false
            var Mandelbrot={
                onRuntimeInitialized:()=>{
                    initialised=true
                }
            }
        </script>
        <script src="mandelbrot/workers/mandelbrot.js"></script>
        <script src="main.js" defer></script>
        <script src="palette.js" defer></script>
        <link rel="stylesheet" href="index.css">
        <title>Mandelbrot Explorer</title>
    </head>
    <body>
        <div id="maincontent">
            <div id="top">

            </div>
            <div id="mid">
                <div id="canvcontainer" class="vertical">
                    <canvas id="render" width="800" height="600" tabindex="0"></canvas>
                </div>
                <div style="width:7px;background:#555"></div>
                <div id="sidebar">
                    <button onclick="saveImg()">Download</button>

                    <div><div class="inpLabel">Iterations:</div><input style="width:70px" type="number" oninput="Mandelbrot.updateWorkers({iters:+this.value|0})"></div>
                    <div><div class="inpLabel">Width:</div><input style="width:70px" type="number" max="10000" onchange="updateDims(+this.value,Mandelbrot.height)"></div>
                    <div><div class="inpLabel">Height:</div><input style="width:70px" type="number" max="10000" onchange="updateDims(Mandelbrot.width,+this.value)"></div>
                </div>
            </div>
            <div id="xhandle" style="height:7px;background:#555;cursor:row-resize">&nbsp;</div>
            <div id="bottom">
                <div style="display:none">
                    Current coordinates: <span id="coordsDisp"></span><br>
                    Go to coordinates: <input id="coordsInp">
                    Zoom to depth: <input id="depthInp">
                    Instructions: Left click to zoom in, right click to zoom out
                </div>
                <div>
                    <!--
                        <button id="editPalette">Edit palette</button>
                    -->
                    <button onclick="randomPalette()">Random palette</button>
                    <div id="paletteEditor"><br>
                        <div style="width:750px;padding-left:15px">
                            <div id="paletteDisplay">
                                <canvas id="paletteGradient" width="700" height="30"></canvas>
                                <div id="colStops" style="height:1em"></div>
                            </div>
                            <div id="curStop" style="display:flex;width:700px">
                                <div>
                                    Stop offset: <input type="number" min="0" max="1" step=".01" id="stopOffset">
                                </div>
                                <div>
                                    Stop colour: <input type="color" id="stopColour">
                                </div>
                            </div>

                            Palette Length: <input type="number" id="lengthInput">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
